# dance_studio_db

### Kate Dankova, 3rd year, group 11

# Step 1
The directories store information about a dance studio, where instructors conduct classes in different dance styles.

### Directory "Class"
---

| Field               | Data Type              | Description                                                   |
|---------------------|------------------------|---------------------------------------------------------------|
| **id**             | `SERIAL`               | Auto-incrementing unique identifier of the class.            |
| **name**           | `VARCHAR(100)`         | Name of the class (e.g., "Salsa Beginners").                 |
| **style**          | `VARCHAR(50)`          | Dance style taught in the class (e.g., "Salsa", "Hip Hop").  |
| **instructorId**   | `INTEGER`              | Foreign key referencing the `id` field in the "Instructor" directory. |
| **durationMinutes**| `SMALLINT`             | Duration of the class in minutes (since class durations are typically small numbers). |
| **price**          | `NUMERIC(10, 2)`       | Cost of the class in the studio's currency with two decimal places. |

---

### Directory "Instructor"

| Field               | Data Type              | Description                                                   |
|---------------------|------------------------|---------------------------------------------------------------|
| **id**             | `SERIAL`               | Auto-incrementing unique identifier of the instructor.        |
| **fullName**       | `VARCHAR(150)`         | Full name of the instructor.                                 |
| **experienceYears**| `SMALLINT`             | Number of years the instructor has been teaching.            |
| **hourlyRate**     | `NUMERIC(10, 2)`       | The hourly rate the instructor is paid with two decimal places. |
| **birthDate**      | `DATE`                 | Birth date of the instructor.                                |

---

### Example Relationship:
1. The **"instructorId"** field in the "Class" directory refers to the **ID** field in the "Instructor" directory. The field is **NOT NULL** because every class must have an assigned instructor.

# Step 2
#### Using PostgreSQL  
Below is the SQL structure and sample data:

```sql
-- Create the "Instructor" table
CREATE TABLE Instructor (
    id SERIAL PRIMARY KEY,
    fullName TEXT NOT NULL,
    experienceYears INTEGER NOT NULL CHECK (experienceYears >= 0),
    hourlyRate NUMERIC(8, 2) NOT NULL CHECK (hourlyRate > 0),
    birthDate DATE NOT NULL CHECK (birthDate <= CURRENT_DATE)
);

-- Create the "Class" table
CREATE TABLE Class (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    style TEXT NOT NULL,
    instructorId INTEGER NOT NULL REFERENCES Instructor(id) ON DELETE CASCADE,
    durationMinutes INTEGER NOT NULL CHECK (durationMinutes > 0),
    price NUMERIC(8, 2) NOT NULL CHECK (price > 0)
);

-- Create indexes to improve performance
CREATE INDEX idx_class_instructorId ON Class(instructorId);

-- Add a unique constraint to prevent duplicate class names and styles
CREATE UNIQUE INDEX unique_class_name_style ON Class(name, style);

-- Insert sample data into the "Instructor" table
INSERT INTO Instructor (fullName, experienceYears, hourlyRate, birthDate)
VALUES
    ('John Smith', 10, 40.50, '1998-07-15'),
    ('Emily Davis', 5, 30.00, '1992-03-22'),
    ('Michael Brown', 7, 35.25, '2000-11-08');

-- Insert sample data into the "Class" table
INSERT INTO Class (name, style, instructorId, durationMinutes, price)
VALUES
    ('Salsa Beginners', 'Salsa', 1, 60, 15.00),
    ('Hip Hop Advanced', 'Hip Hop', 2, 90, 20.00),
    ('Ballet Basics', 'Ballet', 3, 45, 12.50);
```

---
![Dance Class Diagram](https://github.com/kdankova/dance_studio_db/blob/main/dance_studio_db_diagram.png)
---

### Table Relationships and Their Uses

1. **Relationship: One-to-Many**
   - **"Instructor" â†” "Class"**
   - **Type**: One-to-Many (1 instructor can teach multiple classes, but each class has only one instructor).
   - **Connection**: The `instructorId` field in the "Class" table references the `id` field in the "Instructor" table.

2. **Usage**:
   - **Data Integrity**: Ensures that each class is associated with a valid instructor.
   - **Query Optimization**:
     - Easily retrieve all classes taught by a specific instructor.
     - Find the instructor responsible for a particular class.
   - **Business Insights**:
     - Analyze instructor workloads by counting their assigned classes.
     - Determine revenue generated by each instructor's classes.

---

### Practical Scenarios:
- **Scheduling**: Assign classes to instructors and verify their availability.
- **Reporting**: Generate performance reports for instructors based on their class enrollments or income generated.
- **Filtering**: Search for classes based on dance styles or instructors' expertise. 
